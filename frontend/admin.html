<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - Academic Performance System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="container">
        <a href="index.html" class="navbar-brand"
          >Academic Performance System</a
        >
        <ul class="navbar-nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="admin.html" class="active">Admin</a></li>
          <li><a href="lecturer.html">Lecturer</a></li>
          <li><a href="dashboard.html">Dashboard</a></li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <!-- Students Section -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Manage Students</h2>
          <button class="btn btn-primary" onclick="openModal('studentModal')">
            Add Student
          </button>
        </div>

        <div class="search-box">
          <input
            type="text"
            id="studentSearch"
            placeholder="Search students by name or matric number..."
            onkeyup="searchStudents()"
          />
        </div>

        <div class="table-responsive">
          <table class="table" id="studentsTable">
            <thead>
              <tr>
                <th>Name</th>
                <th>Matric No</th>
                <th>Department</th>
                <th>Level</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="studentsBody">
              <tr id="studentsLoadingRow">
                <td colspan="5" style="text-align: center; padding: 30px">
                  <div class="spinner"></div>
                  <p style="margin-top: 10px; color: #666">
                    Loading students...
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Courses Section -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Manage Courses</h2>
          <button class="btn btn-primary" onclick="openModal('courseModal')">
            Add Course
          </button>
        </div>

        <div class="table-responsive">
          <table class="table" id="coursesTable">
            <thead>
              <tr>
                <th>Course Code</th>
                <th>Course Title</th>
                <th>Credit Unit</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="coursesBody">
              <tr id="coursesLoadingRow">
                <td colspan="4" style="text-align: center; padding: 30px">
                  <div class="spinner"></div>
                  <p style="margin-top: 10px; color: #666">
                    Loading courses...
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Debug Panel (Remove in production) -->
      <div
        class="card"
        style="
          margin-top: 20px;
          background-color: #f8f9fa;
          border: 1px solid #dee2e6;
        "
      >
        <div class="card-header">
          <h3 class="card-title">Debug Panel</h3>
        </div>
        <div class="card-body">
          <div style="display: flex; gap: 10px; flex-wrap: wrap">
            <button class="btn btn-secondary" onclick="debugStudents()">
              Debug Students
            </button>
            <button class="btn btn-secondary" onclick="debugCourses()">
              Debug Courses
            </button>
            <button class="btn btn-warning" onclick="forceReload()">
              Force Reload All
            </button>
          </div>
          <div
            id="debugOutput"
            style="
              margin-top: 15px;
              padding: 15px;
              background: white;
              border: 1px solid #ccc;
              border-radius: 5px;
              max-height: 300px;
              overflow: auto;
              font-family: monospace;
              font-size: 12px;
            "
          >
            Click a debug button to see data...
          </div>
        </div>
      </div>
    </div>

    <!-- Student Modal -->
    <div id="studentModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('studentModal')">&times;</span>
        <h2 id="studentModalTitle">Add Student</h2>
        <form id="studentForm" onsubmit="saveStudent(event)">
          <input type="hidden" id="studentId" />
          <div class="form-group">
            <label for="studentName">Name:</label>
            <input
              type="text"
              id="studentName"
              placeholder="Enter student's full name"
              required
            />
          </div>
          <div class="form-group">
            <label for="studentMatric">Matric No:</label>
            <input
              type="text"
              id="studentMatric"
              placeholder="e.g., U1CS2409TR"
              required
            />
          </div>
          <div class="form-group">
            <label for="studentDepartment">Department:</label>
            <input
              type="text"
              id="studentDepartment"
              placeholder="e.g., Computer Science"
              required
            />
          </div>
          <div class="form-group">
            <label for="studentLevel">Level:</label>
            <select id="studentLevel" required>
              <option value="">Select Level</option>
              <option value="100">100 Level</option>
              <option value="200">200 Level</option>
              <option value="300">300 Level</option>
              <option value="400">400 Level</option>
              <option value="500">500 Level</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary">Save</button>
          <button
            type="button"
            class="btn btn-secondary"
            onclick="closeModal('studentModal')"
          >
            Cancel
          </button>
        </form>
      </div>
    </div>

    <!-- Course Modal -->
    <div id="courseModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('courseModal')">&times;</span>
        <h2 id="courseModalTitle">Add Course</h2>
        <form id="courseForm" onsubmit="saveCourse(event)">
          <input type="hidden" id="courseId" />
          <div class="form-group">
            <label for="courseCode">Course Code:</label>
            <input
              type="text"
              id="courseCode"
              placeholder="e.g., CSC411"
              required
            />
          </div>
          <div class="form-group">
            <label for="courseTitle">Course Title:</label>
            <input
              type="text"
              id="courseTitle"
              placeholder="e.g., Software Engineering"
              required
            />
          </div>
          <div class="form-group">
            <label for="creditUnit">Credit Unit:</label>
            <select id="creditUnit" required>
              <option value="">Select Credit Unit</option>
              <option value="1">1 Credit</option>
              <option value="2">2 Credits</option>
              <option value="3">3 Credits</option>
              <option value="4">4 Credits</option>
              <option value="5">5 Credits</option>
              <option value="6">6 Credits</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary">Save</button>
          <button
            type="button"
            class="btn btn-secondary"
            onclick="closeModal('courseModal')"
          >
            Cancel
          </button>
        </form>
      </div>
    </div>
    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
    <script src="js/admin.js"></script>
  </body>
</html>
